services:
  rpc:
    image: ethereum/client-go:v1.11.3
    restart: always
    working_dir: /rpc
    hostname: rpc
    volumes:
      - ./:/rpc
    ports:
      - 30334:30333
      - 8545:8545 # HTTP-RPC
      - 8546:8546 # WebSocket-RPC
    command: |
      --networkid 224
      --syncmode "full"
      --gcmode "archive"
      --miner.gasprice 10000000000
      --miner.gaslimit 40000000
      --nat extip:139.180.135.227
      --datadir "node"
      --nousb
      --http --http.addr "0.0.0.0" --http.port 8545 --http.corsdomain "*" --http.vhosts "*" --http.api "debug,eth,net,web3,txpool"
      --ws --ws.addr "0.0.0.0" --ws.port 8546 --ws.origins "*" --ws.api "net,web3,eth"
      --port 30333
      --bootnodes "enode://396058b9c2a1517e2fec5f4fd8af06d8bd1e7904ca2d70b0f968f62d03f97a22d6b70f88e6e827d1081b4839b743b9dd579248ac83109f04a80c3682a8725243@192.168.1.39:30333"
    logging:
      driver: "json-file"
      options:
        max-size: "1g"
        max-file: "1"
